\NeedsTeXFormat{LaTeX2e}


\ProvidesPackage{style}[01/07/2019 Custom LaTeX style]


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PACKAGES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Standalone
\RequirePackage{standalone}


%% Encoding
%\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}


%% Fonts and typography
%\RequirePackage{mathpazo}             % Latin Modern newtxsf
%\usepackage{lmodern}
%\RequirePackage[light,condensed,math,lf]{iwona}
%\renewcommand{\sfdefault}{iwona}   % Helvetica (phv)
%\RequirePackage[scaled]{beramono}     % Bera Mono (Bitstream Vera Sans Mono)

%\def\mySfFamily{\fontfamily{cmbr}\selectfont\sffamily\sansmath}
%\RequirePackage{sansmathfonts}

\RequirePackage[final]{microtype}   % Improved typography
\RequirePackage{enumitem}           % Format lists
\setlist[itemize]{    font = \upshape,            before = \leavevmode}
\setlist[enumerate]{  font = \upshape,            before = \leavevmode}
\setlist[description]{font = \bfseries\sffamily,  before = \leavevmode}

%\RequirePackage{siunitx}           % Typesetting units
%\sisetup{per-mode = symbol}

\RequirePackage{listings}          % Typesetting code
\lstset
{
    basicstyle       = \ttfamily\footnotesize,
    commentstyle     = \color{gray},
    stringstyle      = \itshape,
    showstringspaces = false,
    frame            = tb
}

\RequirePackage[obeyspaces, spaces, hyphens]{url}      % Typesetting URLs
\urlstyle{tt}


%% Language
%\RequirePackage{babel}      % Automatic translations
\RequirePackage{csquotes}   % Quotation marks with \enquote
%\usepackage[spanish,es-noshorthands]{babel}

%% Mathematics
\RequirePackage{amsmath, amsfonts, amssymb}
\RequirePackage{upgreek, bm, xfrac, theorem}    % Extra symbols
\RequirePackage{mathtools}  % Fonts and environments for mathematical formulae
\RequirePackage{mathrsfs}

%% Figures
\RequirePackage[dvipsnames]{xcolor}     % Pre-defined colors
\RequirePackage{graphicx}         % Tool for importing images
\RequirePackage{float, multicol, subfig, wrapfig}
\graphicspath{{graphics/}}
%\RequirePackage{subcaption}       % Multiple figures in one

%% TikZ
\RequirePackage{tikz,tikz-cd,pgfplots}
\pgfplotsset{compat=1.12}
\usetikzlibrary{arrows,matrix,shapes,through,trees,decorations,positioning}

%% PStriks
\RequirePackage{pstricks}
\def\arrow#1{\pspicture[shift=2pt](#1,0)\psline{->}(#1,0)\endpspicture}

%% Tables
\RequirePackage{multirow}       % Rows spanning multiple lines in tables
\RequirePackage{tablefootnote}  % Footnotes for tables
\RequirePackage{longtable}      % Table that can break across pages
\RequirePackage{pdflscape}      % Rotate pages
\RequirePackage{array}
\newcolumntype{L}{>{$}l<{$}}              % math-mode version of "l" column type
\newcolumntype{R}{>{$}r<{$}}              % math-mode version of "r" column type
\newcolumntype{C}{>{$}c<{$}}              % math-mode version of "c" column type



%% Front page FYS
%\usepackage[IBV, master, print]{frontpage0}
%\usepackage[FYS, master, print]{frontpage1}
%\usepackage[IBV, master, print]{mnfrontpage}


%% Organising tools
\RequirePackage{comment}                                 % Multiline comments
\RequirePackage[notref, notcite]{showkeys}               % Labels in margins
\renewcommand{\showkeyslabelformat}[1]
{
    \fbox
    {
        \parbox[t]{0.6\marginparwidth}
        {
            \centering\normalfont\footnotesize\ttfamily
            \path{#1}
        }
    }
}
\RequirePackage[obeyFinal,
                color       = orange,
                bordercolor = orange,
                textsize    = footnotesize,
                figwidth    = 0.99\linewidth]{todonotes} % Marginal notes


%% Miscellaneous
\RequirePackage{xspace}         % Clever space
\RequirePackage{textcomp}       % Extra symbols


%% Bibliography
\RequirePackage{mathscinet}
%\usepackage{fontawesome}
\RequirePackage[backend      = bibtex8,
                language     = spanish,
				bibencoding  = utf8
                sortcites    = true,
				sorting      = none,
                giveninits   = true,
                uniquename   = init,
                doi          = false,
                isbn         = false,
                url          = true,
                maxcitenames = 3,
				backref      = true,
				natbib       = true,
                maxbibnames  = 3,
                style        = nature]{biblatex}
\DeclareFieldFormat[article,book]{title}{\textit{#1}}
\renewcommand{\mkbibnamefirst}[1]{\textsc{#1}}
\renewcommand{\mkbibnamelast}[1]{\textsc{#1}}
\renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
\renewcommand{\mkbibnameaffix}[1]{\textsc{#1}}
\renewcommand*{\nameyeardelim}{\addcomma\space}
\renewcommand*{\labelnamepunct}{\space\textendash\space}
%\DeclareFieldFormat{url}{\mkbibacro{URL}\addcolon\space\href{#1}{\faExternalLink}}

%\DeclareNameAlias{sortname}{family-given}
%\DeclareNameAlias{default}{family-given}
%\DeclareFieldFormat[article]{volume}{\bibstring{jourvol}\addnbspace#1}
%\DeclareFieldFormat[article]{number}{\bibstring{number}\addnbspace#1}
%\renewbibmacro*{volume+number+eid}
%{
%    \printfield{volume}
%    \setunit{\addcomma\space}
%    \printfield{number}
%    \setunit{\addcomma\space}
%    \printfield{eid}
%}

\addbibresource{backmatter/Bibliography.bib}


%% Cross references
%\RequirePackage{varioref}
%\RequirePackage{hyperref}
%\RequirePackage[nameinlink, capitalize, noabbrev]{cleveref}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% CORE PARAMETERS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Initiate new paragraphs with a blank line
%% and no indentation
\setlength{\parindent}{12pt}
%\setlength{\parskip}{1.5ex plus 0.5ex minus 0.2ex}
\setlength{\parskip}{0.5ex}


%% Relax parameters for line breaks
\pretolerance = 9999%2000
\tolerance    = 9999%6000
\hbadness     = 9999%6000
\setlength{\emergencystretch}{3em}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% MEMOIR SETTINGS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Title page
\pretitle{\begin{center}\huge\sffamily\bfseries\boldmath}


%% Book
\renewcommand*{\printbooktitle}[1]
{
    \hrule\vskip\onelineskip
    \centering\booktitlefont #1
    \vskip\onelineskip\hrule
}
\renewcommand*{\afterbookskip}{\par}
\renewcommand*{\booktitlefont}{\Huge\bfseries\boldmath\sffamily}
\renewcommand*{\booknamefont}{\normalfont\huge\bfseries\MakeUppercase}


%% Part
\renewcommand*{\printparttitle}[1]
{
    \hrule\vskip\onelineskip
    \centering\parttitlefont #1
    \vskip\onelineskip\hrule
}
\renewcommand*{\afterpartskip}{\par}
\renewcommand*{\parttitlefont}{\Huge\bfseries\boldmath\sffamily}
\renewcommand*{\partnamefont}{\normalfont\huge\bfseries\MakeUppercase}


%% Chapter
%\chapterstyle{demo2}
%\chapterstyle{ell}
\chapterstyle{madsen}
%\chapterstyle{dowding}

\setsecnumdepth{subsection}
\renewcommand*{\printchaptername}
{
    \centering\chapnamefont\sffamily\MakeUppercase{\@chapapp}
}
%\renewcommand*{\printchapternum}{\chapnumfont\thechapter\space}
%\renewcommand*{\chaptitlefont}{\Huge\bfseries\boldmath\sffamily\center}
%\renewcommand*{\chaptitlefont}{\Huge\bfseries\boldmath\sffamily\center}


%% Lower level sections
\setsecheadstyle{\Large\bfseries\boldmath\sffamily\raggedright}
\setsubsecheadstyle{\large\bfseries\boldmath\sffamily\raggedright}
\setsubsubsecheadstyle{\normalsize\bfseries\boldmath\sffamily\raggedright}
\setparaheadstyle{\normalsize\bfseries\boldmath\sffamily\raggedright}
\setsubparaheadstyle{\normalsize\bfseries\boldmath\sffamily\raggedright}


%% Abstract
\renewcommand{\abstractnamefont}{\sffamily\bfseries}
\renewcommand{\abstracttextfont}{\normalfont\small\noindent\ignorespaces}


%% Table of contents
\setrmarg{3em}
\setpnumwidth{2em}
\addtolength{\cftbooknumwidth}{0.5em}
\addtolength{\cftpartnumwidth}{0.5em}
\addtolength{\cftchapternumwidth}{0.5em}
\addtolength{\cftsectionindent}{0.5em}
\addtolength{\cftsubsectionindent}{0.5em}
\addtolength{\cftsubsubsectionindent}{0.5em}
\addtolength{\cftparagraphindent}{0.5em}
\addtolength{\cftsubparagraphindent}{0.5em}
\renewcommand{\cftchapteraftersnumb}{\bfseries\boldmath}


%% Header and footer
\pagestyle{ruled}
\makeevenhead{ruled}{\sffamily\leftmark}{}{}
\makeoddhead {ruled}{}{}{\sffamily\rightmark}
\makeevenfoot{ruled}{\sffamily\thepage}{}{}
\makeoddfoot{ruled}{}{}{\sffamily\thepage}

\makepagestyle{chapter}
\makeevenfoot{chapter}{\sffamily\thepage}{}{}
\makeoddfoot{chapter}{}{}{\sffamily\thepage}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%% USER-DEFINED MACROS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Operators
\newcommand{\diff}{\mathop{}\!\mathrm{d}}

\endinput